#!/usr/bin/env groovy

node('') {
    def gVar="GlobalVar-1"

	stage('Clean Environment') {
            deleteDir()
        }
        
        stage('Checkout'){
			checkout scm
		}
	
	stage('Stage-1')
	{
    echo gVar
    sh '''
    	source vars.sh
        echo ${gVar}
	pwd
	export gVarEx=''' + gVar + '''
	./1.sh
	echo ${gVarEx}
        echo ${gVar}
		    '''
	}
		
	stage('Stage-2')
	{
    echo gVar
    echo gVarEx
		sh '''
        echo ${gVar}
		    ./2.sh
		    '''
		echo gVar
	}
}
